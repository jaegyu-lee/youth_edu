<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶œì„ ë³´ê³ </title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 150px; margin-bottom: 10px; }
        button { padding: 10px; cursor: pointer; }
        #summary, #details { white-space: pre-wrap; background: #f3f3f3; padding: 10px; height: 200px; }
    </style>
</head>
<body>
    <h2>ì¶œì„ ë³´ê³  ì‹œìŠ¤í…œ</h2>
    <div id="inputs">
        <h4>14ê°œ ì§€ì—­ ë°ì´í„° ì…ë ¥</h4>
        <script>
            const areaNames = ["ë³´ë¼ë§¤1","ë³´ë¼ë§¤2","ëª©ë™","í™ëŒ€","ì˜ë“±í¬","ìˆ­ì‹¤","ë…¸ëŸ‰ì§„","ë¬¸ë˜","ëŒ€í•™ë¶€","ìƒˆì‹ ì","ìƒˆì‹ ìë¶€","ì—¬ì˜ë„","êµ­ì œ","ì „ì…ë¶€"];
            document.write(areaNames.map(name => `<label>${name}<br><textarea id="${name}"></textarea></label>`).join("<br>"));
        </script>
    </div>
    <button onclick="processAttendance()">ì¶œì„ ë¶„ì„</button>
    <h3>ìš”ì•½:</h3>
    <textarea id="summary" readonly></textarea>
    <h3>ìƒì„¸ ë‚´ì—­:</h3>
    <textarea id="details" readonly></textarea>

    <script>
        function processAttendance() {
            let onTimeArr = 0;
            let lateTimeArr = [];
            let cannotArr = [];
            let summaryText = "ğŸ’’ ë¹„íˆ¬ë¹„ì„¼í„° íšŒì°¨ ë³´ê³ \nâ€¢ ì¼ì‹œ: 420201(í† ) 10:30\nâ€¢ ì¥ì†Œ: êµ¬ë””êµìœ¡ê´€ 5ì¸µ\n";
            let detailsText = "";

            areaNames.forEach(area => {
                let stdList = document.getElementById(area).value;
                let onTime = (stdList.split("*ì •ì‹œë„ì°©")[1] || "").split("*ì§€ê°")[0].replace(/\s+/g, " ").trim();
                let late = (stdList.split("ì§€ì—­/ì´ë¦„/ë„ì°©ì˜ˆì •ì‹œê°„(ì‚¬ìœ )")[1] || "").split("- ë¶ˆì°¸")[0].replace(/\s+/g, " ").replace(/\(20ë¶„ ì´ìƒ ì§€ê°ì‹œ ë¶ˆì°¸ìœ¼ë¡œ ì‘ì„±\)/g, "").trim();
                let cannot = (stdList.split("ì§€ì—­/ì´ë¦„/ì‚¬ìœ ")[1] || "").replace(/\n\n/g, "").trim();

                let onTimeList = onTime ? onTime.split(" ").filter(name => name !== "ì´ë¦„") : [];
                let lateList = late ? late.split(" ") : [];
                let cannotList = cannot ? cannot.split("\n") : [];

                onTimeArr += onTimeList.length;
                lateTimeArr = lateTimeArr.concat(lateList);
                cannotArr = cannotArr.concat(cannotList);

                detailsText += `\n${area} ì§€ì—­\n`;
                detailsText += `- ì¶œì„: ${onTimeList.length}ëª…\n`;
                if (onTimeList.length > 0) {
                    detailsText += `${onTimeList.join("\n")}\n`;
                }
                if (lateList.length > 0) {
                    detailsText += `- ì§€ê°: ${lateList.length}ëª…\n${lateList.join("\n")}\n`;
                }
                if (cannotList.length > 0) {
                    detailsText += `- ê²°ì„: ${cannotList.length}ëª…\n${cannotList.join("\n")}\n`;
                }
            });
            
            summaryText += `- ì´ì›: ${onTimeArr + lateTimeArr.length + cannotArr.length}ëª…\n`;
            summaryText += `- ì¶œì„ì: ${onTimeArr}ëª…\n`;
            summaryText += `- ì§€ê°ì: ${lateTimeArr.length}ëª…\n`;
            if (lateTimeArr.length > 0) {
                summaryText += `${lateTimeArr.join("\n")}\n`;
            }
            summaryText += `- ê²°ì„ì: ${cannotArr.length}ëª…\n`;
            if (cannotArr.length > 0) {
                summaryText += `${cannotArr.join("\n")}\n`;
            }
            
            document.getElementById("summary").value = summaryText;
            document.getElementById("details").value = detailsText;
        }
    </script>
</body>
</html>
